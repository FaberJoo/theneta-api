# 서버 설정
server:
  port: 8000 # 개발 서버 포트

# 스프링 설정
spring:
  application:
    name: theneta # 애플리케이션 이름
  config:
    activate:
      on-profile: local # 기본 프로파일 활성화
    import: 'aws-parameterstore:/config/theneta'
    cloud:
      aws:
        parameterstore:
          region: ${aws_region}
        credentials:
          access-key: ${aws_access_key}
          secret-key: ${aws_secret_key}

  # 데이터베이스 설정
  datasource:
    dbcp2:
      driver-class-name: org.postgresql.Driver # PostgreSQL 드라이버
    url: jdbc:postgresql://${.db.local.host}:${.db.port}/${.db.local.db} # 개발 DB 접속 정보
    username: ${.db.local.username} # DB 사용자
    password: ${.db.local.password} # DB 비밀번호

  # Redis 설정
  data:
    redis:
      host: ${.redis.local.host} # Redis 호스트
      port: ${.redis.port} # Redis 포트
      timeout: 3000 # 연결 타임아웃 (ms)
      lettuce:
        pool: # Redis 커넥션 풀 설정
          max-active: 8 # 최대 활성 연결 수
          max-idle: 8 # 최대 유휴 연결 수
          min-idle: 0 # 최소 유휴 연결 수
          max-wait: -1 # 최대 대기 시간 (-1은 무제한)

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: none # 자동 스키마 생성 비활성화
    properties:
      hibernate:
        ddl-auto: validate # 시작 시 스키마 검증만 수행
        format_sql: true # SQL 포맷팅 활성화
        show_sql: true # SQL 쿼리 출력

  # Flyway 설정
  flyway:
    enabled: true # DB 마이그레이션 도구 활성화

# JWT 설정
jwt:
  secret: ${.jwt.secret} # JWT 서명 키
  at-expiry: 1800 # 액세스 토큰 만료 시간 (30분)
  at-key: access-token # 액세스 토큰 키 이름
  rt-expiry: 1209600 # 리프레시 토큰 만료 시간 (14일)
  rt-key: refresh-token # 리프레시 토큰 키 이름

# 로깅 설정
logging:
  level:
    org.springframework:
      web: debug # 스프링 웹 로그 레벨
    site.theneta.api: debug # 애플리케이션 로그 레벨

# 애플리케이션 설정
theneta:
  base-url: http://localhost:3000 # 프론트엔드 서버 URL
